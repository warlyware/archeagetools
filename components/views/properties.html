<div class="container">
	<div class="row">
		<div class="col-lg-9">
			<!-- Main Topbox / Add Property Topbox -->
			<div class="well" collapse="topBoxCollapsed" id="topbox">
				<form class="formgroup text-center" name="waterform" ng-submit="addProperty()" novalidate>
					<h3 class="text-center">add a property</h3>
					<div class="inputwrapper">
						<span>owner:</span>
						<select required name="propowner" ng-model="propowner" autofocus>
							<option ng-repeat="char in characters" ng-value="{{char.charname}}">{{char.charname}}</option>
						</select>
						<span>location:</span>
						<select required ng-model="chosenLocation" ng-options="location.name for location in locations"></select>
						<span>type:</span>
						<select required name="proptypes" ng-model="proptypes">
							<option value="house">House</option>
							<option value="farm">Farm</option>
							<option value="workstation">Workstation</option>
						</select>							
					</div>
					<br>
					<select id="proptypeHouse" ng-show="proptypes=='house'" ng-model="chosenProptype" ng-options="type.name for type in houseTypes"></select>
					<select id="proptypeFarm" ng-show="proptypes=='farm'" ng-model="chosenProptype" ng-options="type.name for type in farmTypes"></select>
					<select id="proptypeWorkstation" ng-show="proptypes=='workstation'" ng-model="chosenProptype" ng-options="type.name for type in workstationTypes"></select>
					<h4>taxes due:</h4>	
					<div>
						<select required name="propduemonth" class="propduemonth" ng-model="propduemonth">
							<option value="" selected>month</option>						
							<option value="01">January</option>
							<option value="02">February</option>
							<option value="03">March</option>
							<option value="04">April</option>
							<option value="05">May</option>
							<option value="06">June</option>
							<option value="07">July</option>
							<option value="08">August</option>
							<option value="09">September</option>
							<option value="10">October</option>
							<option value="11">November</option>
							<option value="12">December</option>
						</select>
						<select required name="propdueday" class="propdueday" ng-model="propdueday">
							<option value="" selected>day</option>
							<option value="01">1</option>
							<option value="02">2</option>
							<option value="03">3</option>
							<option value="04">4</option>
							<option value="05">5</option>
							<option value="06">6</option>
							<option value="07">7</option>
							<option value="08">8</option>
							<option value="09">9</option>
							<option value="10">10</option>
							<option value="11">11</option>
							<option value="12">12</option>
							<option value="13">13</option>
							<option value="14">14</option>
							<option value="15">15</option>
							<option value="16">16</option>
							<option value="17">17</option>
							<option value="18">18</option>
							<option value="19">19</option>
							<option value="20">20</option>
							<option value="21">21</option>
							<option value="22">22</option>
							<option value="23">23</option>
							<option value="24">24</option>
							<option value="25">25</option>
							<option value="26">26</option>
							<option value="27">27</option>
							<option value="28">28</option>
							<option value="29">29</option>
							<option value="30">30</option>
							<option value="31">31</option>
						</select>
						@
						<select required name="propduehour" class="propduehour" ng-model="propduehour">
							<option value="" selected>h</option>
							<option value="00">0</option>
							<option value="01">1</option>
							<option value="02">2</option>
							<option value="03">3</option>
							<option value="04">4</option>
							<option value="05">5</option>
							<option value="06">6</option>
							<option value="07">7</option>
							<option value="08">8</option>
							<option value="09">9</option>
							<option value="10">10</option>
							<option value="11">11</option>
							<option value="12">12</option>
							<option value="13">13</option>
							<option value="14">14</option>
							<option value="15">15</option>
							<option value="16">16</option>
							<option value="17">17</option>
							<option value="18">18</option>
							<option value="19">19</option>
							<option value="20">20</option>
							<option value="21">21</option>
							<option value="22">22</option>
							<option value="23">23</option>
						</select>
							:
						<select required name="propduemin" class="propduemin" ng-model="propduemin">
							<option value="" selected>m</option>
							<option value="01">01</option>
							<option value="02">02</option>
							<option value="03">03</option>
							<option value="04">04</option>
							<option value="05">05</option>
							<option value="06">06</option>
							<option value="07">07</option>
							<option value="08">08</option>
							<option value="09">09</option>
							<option value="10">10</option>
							<option value="11">11</option>
							<option value="12">12</option>
							<option value="13">13</option>
							<option value="14">14</option>
							<option value="15">15</option>
							<option value="16">16</option>
							<option value="17">17</option>
							<option value="18">18</option>
							<option value="19">19</option>
							<option value="20">20</option>
							<option value="21">21</option>
							<option value="22">22</option>
							<option value="23">23</option>
							<option value="24">24</option>
							<option value="25">25</option>
							<option value="26">26</option>
							<option value="27">27</option>
							<option value="28">28</option>
							<option value="29">29</option>
							<option value="30">30</option>
							<option value="31">31</option>
							<option value="32">32</option>
							<option value="33">33</option>
							<option value="34">34</option>
							<option value="35">35</option>
							<option value="36">36</option>
							<option value="37">37</option>
							<option value="38">38</option>
							<option value="39">39</option>
							<option value="40">40</option>
							<option value="41">41</option>
							<option value="42">42</option>
							<option value="43">43</option>
							<option value="44">44</option>
							<option value="45">45</option>
							<option value="46">46</option>
							<option value="47">47</option>
							<option value="48">48</option>
							<option value="49">49</option>
							<option value="50">50</option>
							<option value="51">51</option>
							<option value="52">52</option>
							<option value="53">53</option>
							<option value="54">54</option>
							<option value="55">55</option>
							<option value="56">56</option>
							<option value="57">57</option>
							<option value="58">58</option>
							<option value="59">59</option>
						</select>
					</div>
					<br>
					<button type="submit" class="btn" ng-disabled="waterform.$invalid || !chosenProptype">add</button>
					<button type="button" class="btn" ng-click="topBoxCollapsed = !topBoxCollapsed">cancel</button>					
				</form>
			</div>
			<!-- Add Character Topbox -->

			<div class="container-fluid " collapse="topBoxCharCollapsed" id="topbox-character">
				<div class="row">
					<div class="col-lg-6 col-lg-offset-3 well">
						<form class="formgroup text-center" name="characterform" ng-submit="addCharacter()" novalidate>
							<div class="inputwrapper">
								<h3>add character</h3>
								<h4>name</h4>
								<input class="form-control" type="text" name="charactername" ng-model="charactername" ng-required="true">
								<h4>level</h4>
								<select required name="level" ng-model="characterlevel">
									<option value="01">01</option>
									<option value="02">02</option>
									<option value="03">03</option>
									<option value="04">04</option>
									<option value="05">05</option>
									<option value="06">06</option>
									<option value="07">07</option>
									<option value="08">08</option>
									<option value="09">09</option>
									<option value="10">10</option>
									<option value="11">11</option>
									<option value="12">12</option>
									<option value="13">13</option>
									<option value="14">14</option>
									<option value="15">15</option>
									<option value="16">16</option>
									<option value="17">17</option>
									<option value="18">18</option>
									<option value="19">19</option>
									<option value="20">20</option>
									<option value="21">21</option>
									<option value="22">22</option>
									<option value="23">23</option>
									<option value="24">24</option>
									<option value="25">25</option>
									<option value="26">26</option>
									<option value="27">27</option>
									<option value="28">28</option>
									<option value="29">29</option>
									<option value="30">30</option>
									<option value="31">31</option>
									<option value="32">32</option>
									<option value="33">33</option>
									<option value="34">34</option>
									<option value="35">35</option>
									<option value="36">36</option>
									<option value="37">37</option>
									<option value="38">38</option>
									<option value="39">39</option>
									<option value="40">40</option>
									<option value="41">41</option>
									<option value="42">42</option>
									<option value="43">43</option>
									<option value="44">44</option>
									<option value="45">45</option>
									<option value="46">46</option>
									<option value="47">47</option>
									<option value="48">48</option>
									<option value="49">49</option>
									<option value="50">50</option>
									<option value="51">51</option>
									<option value="52">52</option>
									<option value="53">53</option>
									<option value="54">54</option>
									<option value="55">55</option>
								</select>
							</div>
							<br>
							<button type="submit" class="btn" ng-disabled="characterform.$invalid">add</button>
							<button type="button" class="btn" ng-click="topBoxCharCollapsed = !topBoxCharCollapsed">cancel</button>
						</form>	
					</div>
				</div>
			</div>

			
			<!-- Character Info Topbox -->
			<div class="container-fluid " collapse="topBoxCharInfoCollapsed" id="topbox-character">
				<div class="row">
					<div class="col-lg-8 col-lg-offset-2 well">
						<div class="text-right"><span class="glyphicon glyphicon-remove button-close" ng-click="topBoxCharInfoCollapsed = !topBoxCharInfoCollapsed"></span></div>
						<h3 class="text-center">{{selectedCharacter.charname}} ( {{selectedCharacter.charlvl}} )</h3>
						<div class="text-center">
							<button type="button" class="btn btn-default" ng-click="deleteCharacter(selectedCharacter.$id)">
								<span class="glyphicon glyphicon-trash"></span>
							</button>
						</div>
					</div>
				</div>
			</div>
			
			<div ng-repeat="val in properties" class="text-center well">
				<h2>{{val.$id}}</h2>
				<hr>
				<div id="{{key}}" class="property" ng-click="selectProperty(key,property)" ng-repeat='(key,property) in val | groupBy: property.propowner' ng-class="{'overdue' : property.propstatus == 'overdue', 'duesoon' : property.propstatus == 'duesoon'}">
					<img ng-src="img/{{property.icon}}.png" height="100px" width="100px">
					<div class="propinfo {{key}}" id="prop{{key}}" ng-show="selectedProp">
						<h3 class="text-center">{{property.proptype}}</h3>
						<h4 class="text-center"><em>Owner: </em> {{property.propowner}}</h4>
						<h4 class="text-center"><em>Location: </em> {{property.proplocation}}</h4>
						<h4 class="text-center"><em>Due: </em> {{property.propduedate}}</h4>
						<h4 class="text-center"><em>@ </em> {{property.propduetime}}</h4>

						<h4 class="text-center"><timer id="proptimer" end-time="property.propduedateiso">{{ddays}}:{{hhours}}:{{mminutes}}:{{sseconds}}</timer></h4>



						<div class="text-center button-wrapper">
							<button class="btn btn-default"><span class="glyphicon glyphicon-info-sign"></span></button>
							<button type="button" class="btn btn-default" ng-click="status.propInfo=!status.propInfo; deleteProperty(key,property)">
								<span class="glyphicon glyphicon-trash"></span>
							</button>

							<button class="btn btn-default" ng-click="payTaxes(key,property)">
								<span class="glyphicon glyphicon-usd"></span>
							</button>
						</div>
					</div>
				</div>
			</div>	
		</div>
		<!-- Infobox -->
		<div class="col-xs-3 ">
			<div id="infobox-wrapper" affix>
				<h3 class="text-center"><em>Hello {{currentUser.mainChar}}</em>
				</h3>
					<div class="button-group text-center">
						<span class="btn btn-default" ng-click="goToTopBox()">
							<span class="glyphicon glyphicon-plus-sign"></span>
						</span>
						<span class="btn btn-default" ng-click="status.characterInfo = !status.characterInfo">
							<span class="glyphicon glyphicon-user"></span>
						</span>
					</div>				
				<!-- Character box -->
				<accordion close-others="true">
					<accordion-group is-open="status.addItem">
					</accordion-group>
					<accordion-group is-open="status.characterInfo" class="character-infobox">
						<h3 class="text-center">characters</h3>
						<h4 class="text-center character-name" ng-repeat="character in characters" ng-click="goToCharInfoTopBox(character)">{{character.charname}}  ( {{character.charlvl}} )</h3>
						<div class="button-group text-center">
							<span class="btn btn-default" ng-click="goToCharTopBox()">
								<span class="glyphicon glyphicon-plus-sign"></span>
							</span>
						</div>
					</accordion-group>
					<accordion-group  is-open="status.propInfo">
						<div id="prop-infobox">
						</div>
					</accordion-group>
				</accordion>
			</div>
		</div>
	</div>
</div>